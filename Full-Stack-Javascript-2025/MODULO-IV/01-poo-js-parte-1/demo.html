<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>

 /* ==========================================================
   CALCULADORA (1 CLASE) — PROMPT CON VALIDACIÓN FUERTE
   ========================================================== */

/* ---------- 1) Helpers para pedir datos con validación ---------- */

// Pide un texto NO vacío.
// - Si el usuario presiona "Cancelar" -> retorna null (para salir).
// - Si ingresa vacío/espacios -> vuelve a pedir.
function pedirTextoNoVacio(mensaje) {
  while (true) {
    const entrada = prompt(mensaje); // string o null (si Cancelar)

    if (entrada === null) return null; // usuario canceló -> salimos

    const texto = entrada.trim(); // quitamos espacios
    if (texto.length === 0) {
      alert("No puedes dejar esto vacío. Intenta nuevamente.");
      continue; // vuelve al prompt
    }

    return texto; // válido
  }
}

// Pide un número válido (acepta coma decimal).
function pedirNumero(mensaje) {
  while (true) {
    const texto = pedirTextoNoVacio(mensaje);
    if (texto === null) return null; // canceló

    // Permitimos "1,5" -> "1.5"
    const normalizado = texto.replace(",", ".");
    const numero = parseFloat(normalizado);

    // isFinite asegura que no sea NaN, Infinity, etc.
    if (!Number.isFinite(numero)) {
      alert("Debes ingresar un número válido. Ej: 10, 3.5, -2");
      continue;
    }

    return numero;
  }
}

// Pide una operación válida: + - * /
function pedirOperacion(mensaje) {
  const validas = ["+", "-", "*", "/"];

  while (true) {
    const op = pedirTextoNoVacio(mensaje);
    if (op === null) return null; // canceló

    // Aceptamos si el usuario escribe con espacios: "  +  "
    const limpia = op.trim();

    if (!validas.includes(limpia)) {
      alert("Operación no válida. Usa: +  -  *  /");
      continue;
    }

    return limpia;
  }
}

/* ---------- 2) Clase Calculadora (1 clase, métodos) ---------- */

class Calculadora {
  constructor(a, b) {
    this.a = a;
    this.b = b;
  }

  sumar() {
    return this.a + this.b;
  }

  restar() {
    return this.a - this.b;
  }

  multiplicar() {
    return this.a * this.b;
  }

  dividir() {
    if (this.b === 0) return "Error: No se puede dividir por 0.";
    return this.a / this.b;
  }

  calcular(op) {
    switch (op) {
      case "+": return this.sumar();
      case "-": return this.restar();
      case "*": return this.multiplicar();
      case "/": return this.dividir();
      default:  return "Error: Operación no válida.";
    }
  }
}

/* ---------- 3) Flujo con prompt (con salida por cancelar) ---------- */

const a = pedirNumero("Ingresa el primer número:");

if (a === null) {
  alert("Calculadora cancelada.");
} else {
  const op = pedirOperacion("Ingresa la operación (+, -, *, /):");
  if (op === null) {
    alert("Calculadora cancelada.");
  } else {
    const b = pedirNumero("Ingresa el segundo número:");
    if (b === null) {
      alert("Calculadora cancelada.");
    } else {
      const calc = new Calculadora(a, b);
      const resultado = calc.calcular(op);

      alert(`Resultado: ${resultado}`);
      console.log("Resultado:", resultado);
    }
  }
}


</script>
</html>