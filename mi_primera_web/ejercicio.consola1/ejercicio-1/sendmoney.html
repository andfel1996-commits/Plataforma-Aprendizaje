<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Enviar Dinero</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <style>
        .selected {
            background-color: #d1ecf1;
            border: 2px solid #0c5460;
        }
    </style>
</head>

<body class="bg-light">
    <div class="container py-5">
        <div class="card shadow">
            <class="card-body">
                <h3>Enviar Dinero</h3>

                <input type="text" id="search-contact" class="form-control mb-3"
                    placeholder="Buscar por nombre o alias...">

                <ul class="list-group" id="contact-list">
                    <li class="list-group-item contact-item" data-name="Juan Perez" data-alias="juan.p">Juan Perez
                        (juan.p)</li>
                    <li class="list-group-item contact-item" data-name="Maria Garcia" data-alias="mery.g">Maria Garcia
                        (mery.g)</li>
                    <li class="list-group-item contact-item" data-name="Carlos Lopez" data-alias="carlos.l">Carlos Lopez
                        (carlos.l)</li>
                    <li class="list-group-item contact-item" data-name="Ana Martinez" data-alias="ana.m">Ana Martinez
                        (ana.m)</li>
                </ul>
        </div>
        <div class="card-body">
            <button id="btn-show-send" class="btn btn-primary mt-3 d-none">Enviar Dinero</button>
            <a href="menu.html" class="btn btn-secondary mt-3">Volver al Menú</a>
            <div id="send-money-section" class="mt-4 d-none">
                <h5>Detalles del Envío</h5>
                <div class="form-group">
                    <label for="amount">Monto a enviar:</label>
                    <input type="number" id="amount" class="form-control" placeholder="$0.00" required>
                </div>


            </div>

            <hr>

            <button id="btn-add-contact" class="btn btn-outline-secondary btn-sm">Agregar nuevo
                contacto</button>
            <form id="form-new-contact" class="mt-3 d-none p-3 border rounded bg-white">
                <div class="form-group"><input type="text" id="new-name" class="form-control" placeholder="Nombre"
                        required></div>
                <div class="form-group"><input type="text" id="new-cbu" class="form-control"
                        placeholder="CBU (22 números)" required></div>
                <button type="submit" class="btn btn-success">Guardar</button>
                <button type="button" id="btn-cancel-contact" class="btn btn-light">Cancelar</button>
            </form>

            <div id="confirm-msg" class="alert alert-success mt-3 d-none">¡Envío realizado con éxito!</div>
        </div>
    </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(function () {
            if (!localStorage.getItem('saldo')) {
                localStorage.setItem('saldo', '0.00');
                $(HTML_ID_DEPOSIT_BUTTON).on("click", handleDepositButtonClick);
                $(HTML_ID_WITHDRAW_BUTTON).on("click", handleWithdrawButtonClick);
            }
        });
        $(document).ready(function () {
            // Mostrar/Ocultar Formulario
            $('#btn-add-contact').click(() => $('#form-new-contact').removeClass('d-none'));
            $('#btn-cancel-contact').click(() => $('#form-new-contact').addClass('d-none'));

            // Validar Nuevo Contacto
            $('#form-new-contact').submit(function (e) {
                e.preventDefault();
                const cbu = $('#new-cbu').val();
                if (cbu.length !== 22 || isNaN(cbu)) {
                    alert('El CBU debe tener 22 dígitos numéricos.');
                } else {
                    alert('Contacto guardado.');
                    $(this).addClass('d-none');
                }
            });

            // Búsqueda
            $('#search-contact').on('keyup', function () {
                const value = $(this).val().toLowerCase();
                $(".contact-item").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
                });
            });

            // Seleccionar contacto
            $(document).on('click', '.contact-item', function () {
                $('.contact-item').removeClass('selected');
                $(this).addClass('selected');
                $('#btn-show-send').removeClass('d-none');
            });

            // Confirmación de envío
            $('#btn-show-send').click(function () {
                $('#confirm-msg').removeClass('d-none');
                setTimeout(() => { window.location.href = 'menu.html'; }, 2000);
            });
        });
    </script>
</body>

</html>